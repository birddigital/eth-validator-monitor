# Task ID: 19
# Title: Implement session-based authentication system
# Status: pending
# Dependencies: 18
# Priority: high
# Description: Create cookie-based session management using Gorilla Sessions for HTML routes, implement registration/login flows
# Details:
Configure Gorilla Sessions with Redis backend. Create session middleware with cookie security (HttpOnly, Secure, SameSite). Implement session store with 7-day expiration. Create auth handlers: login, logout, register. Add password hashing with bcrypt (cost 12). Integrate with existing auth.UserRepository.

# Test Strategy:
Test session creation and persistence. Verify cookie security flags. Test session expiration and renewal. Integration test login/logout flow. Test CSRF protection on forms.

Visual Verification (Playwright MCP):
- Capture screenshots at key interaction points
- Establish visual regression baselines for comparison
- Test across viewports: mobile (375px), tablet (768px), desktop (1440px), wide (1920px)
- Verify dark mode rendering (if applicable)
- Test HTMX partial updates (ensure no layout shift or flashing)
- Validate accessibility: focus indicators, color contrast ratios
- Screenshot error states and empty states
- Verify loading states and skeleton screens render correctly
- Use Playwright MCP to navigate, interact, and capture all states
- Store screenshots in tests/visual-regression/baselines/
- Compare against baselines on subsequent runs (fail on >5% diff)
- Screenshot: Login form in default state
- Screenshot: Login form with validation errors
- Screenshot: Login form with loading state
- Screenshot: Successful login redirect
- Screenshot: Session expired state
- Screenshot: CSRF token error display
- Verify cookie security flags in browser DevTools
